<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Merge cell values into a single cell by rows or columns — merge_cells • unpivotr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Merge cell values into a single cell by rows or columns — merge_cells"><meta name="description" content="When a single column header is split across cells, merge the
cells with merge_rows() or merge_cols().  E.g. if a column header &quot;Mean
GDP&quot; is split over two cells, where the top cell has the value &quot;Mean&quot; and the
bottom cell has the value &quot;GDP&quot;, then merge_rows() will combine them into a
single cell with the value &quot;Mean GDP&quot;.
merge_rows() keeps the top cell, and merge_cols() keeps the left-most
cell.  When there are several columns of headers, merge_rows() aligns the
output cells so that they are all in the same row, and similarly
merge_cols() aligns to the same column.
These functions apply only to cells with character values because it doesn't
make sense to concatenate non-character values.  Convert cell values to
characters first if you need to merge non-character cells.
Columns other than the one that is concatenated will take the value of the
top or left-most cell.  For example, if cells has the columns data_type
and is_blank, and the top or left-most cell has the values blank or
TRUE in those columns, then the resulting merged cell will also have the
values blank or TRUE in those columns, even if the concatenated value is
no longer blank."><meta property="og:description" content="When a single column header is split across cells, merge the
cells with merge_rows() or merge_cols().  E.g. if a column header &quot;Mean
GDP&quot; is split over two cells, where the top cell has the value &quot;Mean&quot; and the
bottom cell has the value &quot;GDP&quot;, then merge_rows() will combine them into a
single cell with the value &quot;Mean GDP&quot;.
merge_rows() keeps the top cell, and merge_cols() keeps the left-most
cell.  When there are several columns of headers, merge_rows() aligns the
output cells so that they are all in the same row, and similarly
merge_cols() aligns to the same column.
These functions apply only to cells with character values because it doesn't
make sense to concatenate non-character values.  Convert cell values to
characters first if you need to merge non-character cells.
Columns other than the one that is concatenated will take the value of the
top or left-most cell.  For example, if cells has the columns data_type
and is_blank, and the top or left-most cell has the values blank or
TRUE in those columns, then the resulting merged cell will also have the
values blank or TRUE in those columns, even if the concatenated value is
no longer blank."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">unpivotr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/html.html">HTML Tables</a></li>
    <li><a class="dropdown-item" href="../articles/introduction.html">Introduction to unpivotr</a></li>
    <li><a class="dropdown-item" href="../articles/small-multiples.html">Small Multiples</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/nacnudus/unpivotr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Merge cell values into a single cell by rows or columns</h1>
      <small class="dont-index">Source: <a href="https://github.com/nacnudus/unpivotr/blob/main/R/merge.R" class="external-link"><code>R/merge.R</code></a></small>
      <div class="d-none name"><code>merge_cells.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>When a single column header is split across cells, merge the
cells with <code>merge_rows()</code> or <code>merge_cols()</code>.  E.g. if a column header "Mean
GDP" is split over two cells, where the top cell has the value "Mean" and the
bottom cell has the value "GDP", then <code>merge_rows()</code> will combine them into a
single cell with the value "Mean GDP".</p>
<p><code>merge_rows()</code> keeps the top cell, and <code>merge_cols()</code> keeps the left-most
cell.  When there are several columns of headers, <code>merge_rows()</code> aligns the
output cells so that they are all in the same row, and similarly
<code>merge_cols()</code> aligns to the same column.</p>
<p>These functions apply only to cells with character values because it doesn't
make sense to concatenate non-character values.  Convert cell values to
characters first if you need to merge non-character cells.</p>
<p>Columns other than the one that is concatenated will take the value of the
top or left-most cell.  For example, if <code>cells</code> has the columns <code>data_type</code>
and <code>is_blank</code>, and the top or left-most cell has the values <code>blank</code> or
<code>TRUE</code> in those columns, then the resulting merged cell will also have the
values <code>blank</code> or <code>TRUE</code> in those columns, even if the concatenated value is
no longer blank.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">merge_rows</span><span class="op">(</span><span class="va">cells</span>, <span class="va">rows</span>, <span class="va">values</span>, collapse <span class="op">=</span> <span class="st">" "</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">merge_cols</span><span class="op">(</span><span class="va">cells</span>, <span class="va">cols</span>, <span class="va">values</span>, collapse <span class="op">=</span> <span class="st">" "</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-cells">cells<a class="anchor" aria-label="anchor" href="#arg-cells"></a></dt>
<dd><p>Data frame. The cells of a pivot table, usually the output of
<code><a href="as_cells.html">as_cells()</a></code> or <code><a href="https://nacnudus.github.io/tidyxl/reference/xlsx_cells.html" class="external-link">tidyxl::xlsx_cells()</a></code>, or of a subsequent operation on
those outputs.</p></dd>


<dt id="arg-rows">rows<a class="anchor" aria-label="anchor" href="#arg-rows"></a></dt>
<dd><p>The numbers of the rows to be merged.</p></dd>


<dt id="arg-values">values<a class="anchor" aria-label="anchor" href="#arg-values"></a></dt>
<dd><p>The column of <code>cells</code> to use as the values of each cell to be
merged.  Given as a bare variable name.</p></dd>


<dt id="arg-collapse">collapse<a class="anchor" aria-label="anchor" href="#arg-collapse"></a></dt>
<dd><p>A character string to separate the values of each cell.</p></dd>


<dt id="arg-cols">cols<a class="anchor" aria-label="anchor" href="#arg-cols"></a></dt>
<dd><p>The numbers of the columns to be merged.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span> <span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span></span>
<span class="r-in"><span><span class="op">~</span><span class="va">row</span>, <span class="op">~</span><span class="va">col</span>, <span class="op">~</span><span class="va">data_type</span>,     <span class="op">~</span><span class="va">chr</span>,</span></span>
<span class="r-in"><span>   <span class="fl">1</span>,    <span class="fl">1</span>,      <span class="st">"chr"</span>,   <span class="st">"Katy"</span>,</span></span>
<span class="r-in"><span>   <span class="fl">2</span>,    <span class="fl">1</span>,      <span class="st">"chr"</span>,  <span class="st">"Perry"</span>,</span></span>
<span class="r-in"><span>   <span class="fl">3</span>,    <span class="fl">1</span>,      <span class="st">"chr"</span>,      <span class="st">"a"</span>,</span></span>
<span class="r-in"><span>   <span class="fl">4</span>,    <span class="fl">1</span>,      <span class="st">"chr"</span>,      <span class="st">"b"</span>,</span></span>
<span class="r-in"><span>   <span class="fl">5</span>,    <span class="fl">1</span>,      <span class="st">"chr"</span>,      <span class="st">"c"</span>,</span></span>
<span class="r-in"><span>   <span class="fl">2</span>,    <span class="fl">2</span>,      <span class="st">"chr"</span>,  <span class="st">"Adele"</span>,</span></span>
<span class="r-in"><span>   <span class="fl">3</span>,    <span class="fl">2</span>,      <span class="st">"chr"</span>,      <span class="st">"d"</span>,</span></span>
<span class="r-in"><span>   <span class="fl">4</span>,    <span class="fl">2</span>,      <span class="st">"chr"</span>,      <span class="st">"e"</span>,</span></span>
<span class="r-in"><span>   <span class="fl">5</span>,    <span class="fl">2</span>,      <span class="st">"chr"</span>,      <span class="st">"f"</span>,</span></span>
<span class="r-in"><span>   <span class="fl">1</span>,    <span class="fl">3</span>,      <span class="st">"chr"</span>, <span class="st">"Ariana"</span>,</span></span>
<span class="r-in"><span>   <span class="fl">2</span>,    <span class="fl">3</span>,      <span class="st">"chr"</span>, <span class="st">"Grande"</span>,</span></span>
<span class="r-in"><span>   <span class="fl">3</span>,    <span class="fl">3</span>,      <span class="st">"chr"</span>,      <span class="st">"g"</span>,</span></span>
<span class="r-in"><span>   <span class="fl">4</span>,    <span class="fl">3</span>,      <span class="st">"chr"</span>,      <span class="st">"h"</span>,</span></span>
<span class="r-in"><span>   <span class="fl">5</span>,    <span class="fl">3</span>,      <span class="st">"chr"</span>,      <span class="st">"i"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="rectify.html">rectify</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 5 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   `row/col` `1(A)` `2(B)` `3(C)`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>         1 Katy   <span style="color: #BB0000;">NA</span>     Ariana</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>         2 Perry  Adele  Grande</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span>         3 a      d      g     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span>         4 b      e      h     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span>         5 c      f      i     </span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu">merge_rows</span><span class="op">(</span><span class="va">x</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="va">chr</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="rectify.html">rectify</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 5 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   `row/col` `1(A)`     `2(B)` `3(C)`       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>         1 Katy Perry Adele  Ariana Grande</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>         2 <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span>         3 a          d      g            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span>         4 b          e      h            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span>         5 c          f      i            </span>
<span class="r-in"><span><span class="va">z</span> <span class="op">&lt;-</span> <span class="fu">merge_cols</span><span class="op">(</span><span class="va">x</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="va">chr</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="rectify.html">rectify</a></span><span class="op">(</span><span class="va">z</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 5 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   `row/col` `1(A)`      `2(B)` `3(C)`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>         1 Katy        <span style="color: #BB0000;">NA</span>     Ariana</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>         2 Perry Adele <span style="color: #BB0000;">NA</span>     Grande</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span>         3 a d         <span style="color: #BB0000;">NA</span>     g     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span>         4 b e         <span style="color: #BB0000;">NA</span>     h     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span>         5 c f         <span style="color: #BB0000;">NA</span>     i     </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Duncan Garmonsway.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

